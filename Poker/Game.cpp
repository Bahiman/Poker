#include "Game.h"

void Game::start()
{
	addPlayer();
	startBettingRound(0);
}

void Game::addPlayer()
{
count:
	std::cout << "How many players will play? (2-6)" << std::endl;
	std::cin >> m_playerCount;
	if (m_playerCount < 2 || m_playerCount > 6)
	{
		std::cout << "Invalid number of players!" << std::endl;
		goto count;
	}
	for (int i = 0; i < m_playerCount; i++)
	{
		std::string name;
		std::cout << "Enter player " << i + 1 << "'s name: ";
		std::cin >> name;
		m_players.emplace_back(m_deck[cardCounter], m_deck[cardCounter + 1], std::move(name));
		cardCounter += 2;
	}

	std::cout << "Please note that the cards will be revealed in the order of the users so don't look at the screen when it ain't ur turn(Press enter to continue)" << std::endl;

	std::cin.get();

	for (int i = 0; i < m_playerCount; i++)
	{
		std::cout << "Player " << i + 1 << "'s cards: " << std::endl;
		std::cout << *m_players[i].getCards() << std::endl;
		std::cin.get();
		std::cout << "///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n///////////////////////////////////////////////////\n";
	}

	std::cout << cardCounter << " is the card counter";

	m_deck.size -= cardCounter - 1;
}

void Game::startBettingRound(uint32_t gameCounter)
{
	if (gameCounter == 0)
	{
		Card flop1 = m_deck[cardCounter];
		Card flop2 = m_deck[++cardCounter];
		Card flop3 = m_deck[++cardCounter];
		std::cout << "And the flop is: " << *flop1.getStringRepresentation() << ", " << *flop2.getStringRepresentation() << ", " << *flop3.getStringRepresentation();
		cardCounter++;
	}
	else if (gameCounter == 1)
	{
			 
	}
}

bool Game::everyoneFolded()
{
	bool returnValue = true;

	for (auto& k : m_players)
	{
		// check if the k has folded
		if (!k.isFolded())
		{
			returnValue = false;
			break;
		}
	}

	return returnValue;
}